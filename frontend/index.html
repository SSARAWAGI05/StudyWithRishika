<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study With Rishika! - Learn & Grow</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <!-- Existing stylesheets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>

    <!-- Welcome Splash Container -->
    <div id="welcome-splash"></div>

    <!-- Navigation Bar -->
    <nav>
        <div class="nav-logo">
            <a href="index.html">
                <img src="assets/LOGO/BACK.png" alt="Study With Rishika Logo" class="logo-image">
                <span class="fade-in">Study With Rishika!</span>
            </a>
        </div>

        <button class="mobile-menu-button" aria-label="Toggle menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        
        <ul class="nav-links fade-in">
            <li><a href="index.html">Home</a></li>
            <li><a href="courses.html">Courses</a></li>
            <li><a href="live-class.html">Live Class</a></li>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="#signin-modal" id="loginLink">Sign In</a></li>
        </ul>
    </nav>

    <!-- Enhanced Home Section -->
    <section class="hero-section">
        <div class="animated-bg"></div>
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">Study With Rishika!</h1>
                <p class="hero-subtitle">Unlock your potential with personalized learning experiences and expert guidance. Join our community of successful learners today!</p>
                
                <div class="hero-features">
                    <a href="courses.html" class="feature-card">
                        <i class="fas fa-book feature-icon"></i>
                        <h3>Explore Courses</h3>
                        <p>Comprehensive notes and practice resources</p>
                    </a>
                    <a href="live-class.html" class="feature-card">
                        <i class="fas fa-video feature-icon"></i>
                        <h3>Live Classes</h3>
                        <p>Interactive sessions with real-time doubt solving</p>
                    </a>
                    <a href="contact.html" class="feature-card">
                        <i class="fas fa-users feature-icon"></i>
                        <h3>Contact Us</h3>
                        <p>Learn and grow with peer support</p>
                    </a>
                </div>

                <div class="hero-cta">
                    <a href="#signin-modal" class="cta-button primary-cta">Sign In / Register</a>
                    <!--<a href="contact.html" class="cta-button secondary-cta">Contact Us</a>-->
                </div>
            </div>
            
            <div class="hero-image">
                <img src="assets/LOGO/RS_BACKREM.png" alt="Study With Rishika" class="floating-image">
            </div>
        </div>
    </section>

    <!-- Sign In Modal -->
    <div id="signin-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2>Sign In</h2>
            <div id="g_id_onload"
                data-client_id="824384838809-h6t46drtqj3sbsd06cjiahcmlbinm6p8.apps.googleusercontent.com"
                data-login_uri="https://cloud.appwrite.io/v1/account/sessions/oauth2/callback/google/676a710c002fcead5a2c"
                data-auto_prompt="false">
            </div>
            <div class="g_id_signin"
                data-type="standard"
                data-shape="rectangular"
                data-theme="outline"
                data-text="sign_in_with"
                data-size="large"
                data-logo_alignment="left">
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="register-modal" class="modal">
        <div class="modal-content fade-in">
            <span class="close">&times;</span>
            <h2>Register</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerName">Name</label>
                    <input type="text" id="registerName" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" required>
                </div>
                <button type="submit" class="button">Register</button>
                <p>Already have an account? <a href="#" id="showSignin">Sign In</a></p>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer id="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h3>About Us</h3>
                <p>Study With Rishika is an online learning platform dedicated to helping students succeed.</p>
            </div>
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="courses.html">Courses</a></li>
                    <li><a href="live-class.html">Live Class</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Follow Us</h3>
                <ul>
                    <li><a href="https://www.linkedin.com/in/rishika-sarawagi-a3ba2119b/" target="_blank">LinkedIn</a></li>
                    <li><a href="https://www.instagram.com/rishikasarawagi?igsh=N3pxazVxeDNzN2Fk" target="_blank">Instagram</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Contact Us</h3>
                <p>Email: sarawagirishika748@gmail.com</p>
                <p>Phone: +91 9903996663</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Study With Rishika. All rights reserved.</p>
        </div>
    </footer>

    <!-- Add this just before closing body tag, after your other scripts -->
    <script type="module">
        const WelcomeSplash = () => {
            const [isVisible, setIsVisible] = React.useState(false);  // Changed initial state to false
            const [hasAnimationCompleted, setHasAnimationCompleted] = React.useState(false);
            
            React.useEffect(() => {
                // Check if user has seen the splash before
                const hasSeenSplash = localStorage.getItem('hasSeenWelcomeSplash');
                
                if (!hasSeenSplash) {
                    // If they haven't seen it, show the splash and set the flag
                    setIsVisible(true);
                    localStorage.setItem('hasSeenWelcomeSplash', 'true');
                    
                    // Auto-close after 3.5 seconds
                    const timer = setTimeout(() => {
                        closeSplash();
                    }, 3500);
                    
                    return () => clearTimeout(timer);
                }
            }, []);
            
            const closeSplash = () => {
                setHasAnimationCompleted(true);
                setTimeout(() => {
                    setIsVisible(false);
                }, 500);
            };
            
            if (!isVisible) return null;

            // Rest of your existing return statement with JSX/createElement remains the same
            return React.createElement('div', {
                className: `fixed inset-0 z-50 flex items-center justify-center bg-black/95
                    ${hasAnimationCompleted ? 'animate-fadeOut' : 'animate-fadeIn'}
                    transition-opacity duration-500`
            }, 
                React.createElement('div', {
                    className: `text-center space-y-8 p-10 rounded-3xl
                        bg-black/50 backdrop-blur-md
                        ${hasAnimationCompleted ? 'animate-slideOut' : 'animate-slideIn'}
                        transition-all duration-500 transform`
                }, [
                    React.createElement('div', {
                        className: "relative group w-40 h-40 mx-auto",
                        key: "logo-container"
                    }, [
                        React.createElement('div', {
                            className: "absolute -inset-1 rounded-full blur-lg bg-gradient-to-r from-blue-500 to-purple-500 opacity-75 group-hover:opacity-100 group-hover:blur-xl transition-all duration-300",
                            key: "logo-blur"
                        }),
                        React.createElement('img', {
                            src: "assets/LOGO/RS_BACKREM.png",
                            alt: "Study With Rishika Logo",
                            className: "relative w-40 h-40 rounded-full animate-float hover:scale-110 transition-transform duration-300",
                            key: "logo"
                        })
                    ]),
                    React.createElement('h1', {
                        className: "text-6xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent animate-fadeIn",
                        key: "title"
                    }, "Welcome to Study With Rishika!"),
                    React.createElement('p', {
                        className: "text-2xl text-gray-300 animate-fadeIn delay-200",
                        key: "subtitle"
                    }, "Your journey to academic excellence begins here"),
                    React.createElement('button', {
                        onClick: closeSplash,
                        className: "group relative px-8 py-3 text-lg font-bold hover:scale-105 transition-transform duration-300",
                        key: "button"
                    }, [
                        React.createElement('span', {
                            className: "absolute inset-0 w-full h-full transition duration-300 ease-out transform translate-x-1 translate-y-1 bg-purple-500 group-hover:-translate-x-0 group-hover:-translate-y-0",
                            key: "button-bg-1"
                        }),
                        React.createElement('span', {
                            className: "absolute inset-0 w-full h-full bg-blue-600 border-2 border-white/20 group-hover:bg-purple-600 transition-colors duration-300",
                            key: "button-bg-2"
                        }),
                        React.createElement('span', {
                            className: "relative text-white group-hover:text-white",
                            key: "button-text"
                        }, "Get Started")
                    ])
                ])
            );
        };
    
        const container = document.getElementById('welcome-splash');
        const root = ReactDOM.createRoot(container);
        root.render(React.createElement(WelcomeSplash));
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuButton = document.querySelector('.mobile-menu-button');
            const navLinks = document.querySelector('.nav-links');
        
            // Toggle menu
            mobileMenuButton.addEventListener('click', function(e) {
                e.stopPropagation(); // Prevent event from bubbling up
                mobileMenuButton.classList.toggle('active');
                navLinks.classList.toggle('active');
                console.log('Menu button clicked'); // Debug line
            });
        
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!navLinks.contains(e.target) && !mobileMenuButton.contains(e.target)) {
                    mobileMenuButton.classList.remove('active');
                    navLinks.classList.remove('active');
                }
            });
        
            // Close menu when clicking on a link
            document.querySelectorAll('.nav-links a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenuButton.classList.remove('active');
                    navLinks.classList.remove('active');
                });
            });
        });
        </script>

    <script src="js/animations.js"></script>
    <script src="js/app.js"></script>
    <script src="js/slideshow.js"></script>
    <script src="mobile-nav.js"></script>
    <script>
        function handleCredentialResponse(response) {
            console.log("Encoded JWT ID token: " + response.credential);
    
            // Send the token to your backend for validation and user session management
            fetch('https://cloud.appwrite.io/v1/account/sessions/oauth2/callback/google/676a710c002fcead5a2c', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ token: response.credential })
            })
            .then(response => response.json())
            .then(data => {
                console.log("Login successful", data);
                // Redirect or update UI after successful login
            })
            .catch(error => console.error("Error logging in", error));
        }
    
        window.onload = function () {
            google.accounts.id.initialize({
                client_id: "824384838809-h6t46drtqj3sbsd06cjiahcmlbinm6p8.apps.googleusercontent.com",
                callback: handleCredentialResponse
            });
            google.accounts.id.prompt(); // Display the One Tap prompt if applicable
        };
    </script>    
    <style>
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            max-width: 500px;
            width: 90%;
            position: relative;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .close-button {
            position: absolute;
            right: 1rem;
            top: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        
        .close-button:hover {
            color: #000;
        }
        
        .modal h2 {
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            font-weight: bold;
        }
        </style>
        
        <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get all necessary elements
            const signinModal = document.getElementById('signin-modal');
            const loginLinks = document.querySelectorAll('[href="#signin-modal"]');
            const closeButtons = document.querySelectorAll('.close-button');
            
            // Function to open modal
            function openModal(modal) {
                modal.classList.add('active');
                console.log('Opening modal');  // Debug line
            }
            
            // Function to close modal
            function closeModal(modal) {
                modal.classList.remove('active');
                console.log('Closing modal');  // Debug line
            }
            
            // Add click handlers to all login links
            loginLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    openModal(signinModal);
                });
            });
            
            // Add click handlers to all close buttons
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    closeModal(modal);
                });
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal')) {
                    closeModal(e.target);
                }
            });
            
            // Prevent modal close when clicking modal content
            document.querySelectorAll('.modal-content').forEach(content => {
                content.addEventListener('click', function(e) {
                    e.stopPropagation();
                });
            });
        });
        </script>
        <script>
            // Initialize Google Sign-In when the page loads
            window.onload = function() {
                // Initialize Google Sign-In
                google.accounts.id.initialize({
                    client_id: "824384838809-h6t46drtqj3sbsd06cjiahcmlbinm6p8.apps.googleusercontent.com",
                    callback: handleCredentialResponse,
                    auto_select: false // Disable auto-select to prevent automatic prompts
                });
            
                // Render the button explicitly
                google.accounts.id.renderButton(
                    document.querySelector('.g_id_signin'),
                    { 
                        theme: "outline",
                        size: "large",
                        type: "standard"
                    }
                );
            };
            
            // Handle the sign-in response
            function handleCredentialResponse(response) {
                console.log("Received credential response"); // Debug line
                
                if (response.credential) {
                    // Send the token to your Appwrite backend
                    fetch('https://cloud.appwrite.io/v1/account/sessions/oauth2/callback/google/676a710c002fcead5a2c', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ token: response.credential })
                    })
                    .then(response => {
                        console.log("Received response from server"); // Debug line
                        return response.json();
                    })
                    .then(data => {
                        console.log("Login successful", data);
                        // Handle successful login here (e.g., redirect or update UI)
                    })
                    .catch(error => {
                        console.error("Error logging in:", error);
                        alert("Login failed. Please try again.");
                    });
                }
            }
        </script>
</body>
</html>